<style>
    .progress-container md-progress-linear {
        position: fixed;
        bottom: 0;
    }

    .loading-container {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: #FAFAFA;
        opacity: 1;
        transition: opacity 0.3s ease-in-out;
        z-index: 4;
    }

    .loading-container:not(.showing) {
        opacity: 0;
    }

    .loading-container .text {
        margin-top: -14px;
    }

    style-loader-spinner,
    style-loader-spinner:before,
    style-loader-spinner:after {
        display: block;
        background: rgba(27,27,27,0.8);
        animation: loader-keyframes 1s infinite ease-in-out;
        width: 1em;
        height: 4em;
    }
    style-loader-spinner {
        color: rgba(27,27,27,0.8);
        text-indent: -9999em;
        margin: 4em auto;
        position: relative;
        font-size: 11px;
        transform: translateZ(0);
        animation-delay: -0.16s;
    }
    style-loader-spinner:before,
    style-loader-spinner:after {
        position: absolute;
        top: 0;
        content: '';
    }
    style-loader-spinner:before {
        left: -1.5em;
        animation-delay: -0.32s;
    }
    style-loader-spinner:after {
        left: 1.5em;
    }
    @keyframes loader-keyframes {
        0%,
        80%,
        100% {
            box-shadow: 0 0;
            height: 4em;
            margin-bottom: 4em;
        }
        40% {
            box-shadow: 0 -2em;
            height: 5em;
            margin-bottom: 3em;
        }
    }

    md-content {
        opacity: 1;
        transition: opacity 0.15s ease-in-out;
        z-index: 3;
    }

    .spinner-transition md-content {
        opacity: 0;
    }
</style>

<div class="loading-container" ng-class="{ 'showing': $ctrl.loading && !$ctrl.hide, 'hide': $ctrl.hide }" layout="column" style-center-content>
    <style-loader-spinner></style-loader-spinner>
    <div class="text" ng-if="$ctrl.canRender">{{ 'Loading' | translate }}</div>
</div>

<div class="progress-container">
    <md-progress-linear md-mode="{{ $ctrl.progress ? 'indeterminate' : 'determinate' }}" value="0" style-box-shadow></md-progress-linear>
</div>
